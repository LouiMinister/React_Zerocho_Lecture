<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    </head>
    <body>
        <div id="root"></div>
        <script type ="text/babel">
            class GuGuDan extends React.Component {
                // constructor(props) {
                //     super(props);
                //     this.state = {
                //         first : Math.ceil(Math.random() * 9),
                //         second : Math.ceil(Math.random() * 9),
                //         value: '',
                //         result: '',
                //         answer : '',
                //     };
                //     // 변할 것들은 state로 한다.
                // }

                state = {
                    first : Math.ceil(Math.random() * 9),
                    second : Math.ceil(Math.random() * 9),
                    value: '',
                    result: '',
                    answer : '',
                };
                //constructor 말고 그냥 state 쓰는 문법을 더 많이 사용한다.


                onSubmit = (e) => {
                    e.preventDefault();
                    if (parseInt(this.state.value) === this.state.first * this.state.second) {
                        // this.setState({
                        //     result: '정답',
                        //     answer : this.state.value,
                        //     first : Math.ceil(Math.random() * 9),
                        //     second : Math.ceil(Math.random() * 9),
                        //     value : '',
                        // });
                        this.setState((prevState) => {
                            return {
                                result : '정답: ' + prevState.value,
                                first: Math.ceil(Math.random() * 9),
                                second : Math.ceil(Math.random() * 9),
                                value: '',
                            };
                        });

                        // this.setState({
                        //     value : this.state.value +1,
                        // });
                        // this.setState({
                        //     value : this.state.value +1,
                        // });
                        // this.setState({
                        //     value : this.state.value +1,
                        // });


                        // setState가 기존 value + 1 이기 때문에 + 3의 결과가 나오지 않을 수 있다.
                        // 기억 ! 예전 state 값으로 새로운 state를 만들 때에는 return 하는 함수로 만들자

                        // 인자를 prevState를 주면 이전 값에 접근하여 사용할 수 있다.
                    }else{
                        this.setState({
                            answer : '',
                            result : '땡',
                            value : '',
                        });
                    }
                };

                onChange = (e) => {
                    this.setState({
                        value: e.target.value
                    });
                };
                // 직접 만들어준 함수들은 화살표 함수를 사용해야 한다.
                // function 을 쓰면 this가 달라져버린다.

                // render만 () 사용한다.

                render (){
                    return (
                        <React.Fragment>
                            <div>{this.state.first}곱하기{this.state.second}는?</div>
                            <form onSubmit ={this.onSubmit} >
                                <input type = "number" value={this.state.value} onChange={this.onChange}/>
                                <button>입력!</button>
                            </form>
                            <div>{this.state.result}</div>
                        </React.Fragment>
                    );
                    // React.Fragment로 의미없는 div를 없앤다.
                    // onchange 할 때 (변하는 부분을 직접 컨트롤 해준다)
                    // input.onchange = (e) => {console.log(e.target.value)}
                    // 이벤트 대상을 가져
                }   // 중괄호 안에는 js 사용 가능
            }
        </script>
        <script type="text/babel">
            ReactDOM.render(<GuGuDan />, document.querySelector('#root'));
        </script>
    </body>
</html>